<!-- Avatar lightbox styles -->
<style>
  .author__avatar img {
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  
  .author__avatar img:hover {
    transform: scale(1.05);
  }
  
  /* Lightbox overlay */
  .lightbox {
    display: none;
    position: fixed;
    z-index: 9999;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    cursor: pointer;
  }
  
  .lightbox img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 60%;
    max-height: 60%;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    cursor: default; /* Prevents click cursor on the image itself */
  }
  
  /* Mobile responsive - make it even smaller on mobile */
  @media (max-width: 768px) {
    .lightbox img {
      max-width: 80%;
      max-height: 80%;
    }
  }
  
  .lightbox .close {
    position: absolute;
    top: 20px;
    right: 30px;
    color: white;
    font-size: 30px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10001;
  }
  
  .lightbox .close:hover {
    opacity: 0.7;
  }
</style>

<!-- Avatar lightbox JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const lightboxHTML = `
    <div id="lightbox" class="lightbox">
      <span class="close">&times;</span>
      <img src="" alt="Profile Image">
    </div>
  `;
  document.body.insertAdjacentHTML('beforeend', lightboxHTML);
  
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = lightbox.querySelector('img');
  const closeBtn = lightbox.querySelector('.close');
  
  const profileImg = document.querySelector('.author__avatar img');
  if (profileImg) {
    profileImg.addEventListener('click', function(event) {
      event.preventDefault(); // Prevent any default navigation
      event.stopPropagation(); // Stop event bubbling
      
      lightboxImg.src = this.src;
      lightbox.style.display = 'block';
      document.body.style.overflow = 'hidden';
    });
  }
  
  function closeLightbox() {
    lightbox.style.display = 'none';
    document.body.style.overflow = 'auto';
  }
  
  closeBtn.addEventListener('click', function(event) {
    event.preventDefault();
    event.stopPropagation();
    closeLightbox();
  });
  
  lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) {
      e.preventDefault();
      e.stopPropagation();
      closeLightbox();
    }
  });
  
  // Prevent clicks on the lightbox image from closing it
  lightboxImg.addEventListener('click', function(e) {
    e.stopPropagation();
  });
  
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && lightbox.style.display === 'block') {
      closeLightbox();
    }
  });
});
</script>